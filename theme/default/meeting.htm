{-include file="header.htm"-}
<link rel="stylesheet" type="text/css" href="{-$css_path-}common.css"/>
<link rel="stylesheet" href="{-$css_path-}layout.css" type="text/css">

<div class="grid_10 home_box" id="content_box">
<form name="meeting" action="" method="post" id="meetForm">
	<div class="box">
		<h2>会议室信息</h2>
			<div class="block" >
				<table>
					<tr>
						<th>会议室名称</th>	
						<th>容量</th>
						<th>是否有投影</th>
						<th>是否有白板</th>
						<th>是否禁用</th>
						<th>删除</th>
						<th>编辑</th>
						<th>&nbsp</th>
					</tr>
					{-foreach from=$meetingInformation item=val-}
					<tr>
						<td><input type="text" id="meetingName{-$val.meetingaddressid-}" value="{-$val.meetingaddress-}"  disabled = "true"></td>
						<td><input type="text" id="numbers{-$val.meetingaddressid-}" value="{-$val.galleryful-}"  disabled = "true"></td>
						<td>
							<select  disabled = "true" id="ppt_2{-$val.meetingaddressid-}">
								<option value="1" {-if $val.haveppt eq 1-} selected="selected" {-/if-}>有</option>
								<option value="0" {-if $val.haveppt eq 0-} selected="selected" {-/if-}>无</option>
							</select>
						</td>
						<td>
							<select  disabled = "true" id="blackbord_1{-$val.meetingaddressid-}">
								<option value="1" {-if $val.haveblackbord eq 1-} selected="selected" {-/if-}>有</option>
								<option value="0" {-if $val.haveblackbord eq 0-} selected="selected" {-/if-}>无</option>
							</select>
						</td>
						<td>
							<select  disabled = "true" id="use{-$val.meetingaddressid-}">
								<option value="1" {-if $val.isenabled eq 1-} selected="selected" {-/if-}>可用</option>
								<option value="0" {-if $val.isenabled eq 0-} selected="selected" {-/if-}>禁用</option>
							</select>
						</td>
						<td><a style="cursor:pointer;" name="meetId" id="d{-$val.meetingaddressid-}" onclick="delet({-$val.meetingaddressid-})">删除</a></td>
						<td><a style="cursor:pointer;" id="e{-$val.meetingaddressid-}" onclick="editM({-$val.meetingaddressid-})">编辑</a></td>
						<td><a style="cursor:pointer;display:none;" id="s{-$val.meetingaddressid-}" onclick="edit({-$val.meetingaddressid-})">确认修改</a></td>
					</tr>
					{-/foreach-}
				</table>
			</div>
	</div>
	<div class="box">
		<h2>新增会议室</h2>
			<div class="block" >
				<table>
					<tr>
						<th>会议室名称</th>	
						<th>容量</th>
						<th>是否有投影</th>
						<th>是否有白板</th>
						<th>是否禁用</th>
						<th>确认</th>
					</tr>
					<tr>
						<td><input type="text" name="meetName" id="newName"></td>
						<td><input type="text" name="number" id="number_1"></td>
						<td>
							<select name="ppt" id="ppt_1">
								<option value="1">有</option>
								<option value="0">无</option>
							</select>
						</td>
						<td>
							<select name="blackbox" id="blackbox_1">
								<option value="1">有</option>
								<option value="0">无</option>
							</select>
						</td>
						<td>
							<select name="able" id="able_1">
								<option value="1">可用</option>
								<option value="0">禁用</option>
							</select>
						</td>
						<td><input type="button" name="meet" id="sub" value="提交"></td>
					</tr>
				</table>
			</div>
	</div>
</form>
<script type="text/javascript">
	$(function($){
		$('#sub').click(function(){
			$a = confirm('确认添加?');
			if($a == true){
				var meetName = $('#newName').val();
				var number = $('#number_1').val();
				var ppt = $('#ppt_1').val();
				var blackbox = $('#blackbox_1').val();
				var able = $('#able_1').val();
				if(meetName == ''){
					alert('请输入会议室名称！');
					$('#newName').focus();
				}else if(number == ''){
					alert('请输入会议室容量！');
					$('#number_1').focus();
				}else{
				$.ajax({
					   type: "POST",
					   url: "{-$smarty.const.ROOT_URL-}index.php?module=meeting&action=index",
					   data: "meet=meetingaddress="+meetName+"/galleryful="+number+"/haveppt="+ppt+"/haveblackbord="+blackbox+"/isenabled="+able,
					   success: function(data){
					    	if(data == '1'){
					    		window.location.reload();
					    	}
					   }
					});
				}
			}
		});
		
	});
	//删除
	function delet(Id){
		if(Id){
			if(confirm('确认删除？')){
// 				alert(Id);
				var deletMeet = document.getElementById("d"+Id);
				deletMeet.href = "{-$smarty.const.ROOT_URL-}index.php?module=meeting&action=index&id="+Id;
				window.location.reload();
			}
		}
	}
	//修改
	function editM(Id){
		document.getElementById("s"+Id).style.display = 'block';
		document.getElementById("e"+Id).style.display = 'none';
		var mName = document.getElementById('meetingName'+Id);
		var nNumber = document.getElementById('numbers'+Id);
		var mPpt = document.getElementById('ppt_2'+Id);
		var mBlack = document.getElementById('blackbord_1'+Id);
		var mUse = document.getElementById('use'+Id);

		mName.disabled = false;
		nNumber.disabled = false;
		mPpt.disabled = false;
		mBlack.disabled = false;
		mUse.disabled = false;
	}
	function edit(Id){
		var mName = document.getElementById('meetingName'+Id);
		var nNumber = document.getElementById('numbers'+Id);
		var mPpt = document.getElementById('ppt_2'+Id);
		var mBlack = document.getElementById('blackbord_1'+Id);
		var mUse = document.getElementById('use'+Id);
		var editMeet = document.getElementById("s"+Id);
		
		mName = mName.value;
		nNumber = nNumber.value;
		mPpt = mPpt.value;
		mBlack = mBlack.value;
		mUse = mUse.value;
		if(confirm('确认修改？')){
			editMeet.href = "{-$smarty.const.ROOT_URL-}index.php?module=meeting&action=index&mId="+Id+"&mName="+mName+"&nNumber="+nNumber+"&mPpt="+mPpt+"&mBlack="+mBlack+"&mUse="+mUse;
		}
	}
</script>
{-include file="footer.htm"-}