{-include file="header.htm"-}
<link rel="stylesheet" type="text/css" href="{-$css_path-}common.css"/>
<script src="{-$js_path-}calendar.js"></script>
<link rel="stylesheet" href="{-$css_path-}layout.css" type="text/css">
<link rel="stylesheet" href="{-$css_path-}edit.css" type="text/css">
<script src="{-$js_path-}ckeditor/ckeditor.js"></script>
 <script type="text/javascript">
	function logoutWeb(){
		 top.location.href=root_url+'index/logout.html';
	}
</script>

<div class="grid_10 home_box" id="content_box">       
	<div class="box">
		<h2>{-if $isEdit-}会议室预订信息修改{-else-}会议室预订{-/if-}</h2>
		<div class="block" >
			<form action="" method="post">
				<table class="edit">
					<tr>
						<th>会议名称：<span class="required">*</span></th><td  colspan="9"><input  name="meetingname" size="55" type="text" value="{-$bookInfo.meetingname-}" required="required"/></td>
					</tr>
					<tr>
						<th>会议室：<span class="required">*</span></th>
						<td><select required name="meetingaddress"><option value="">选择会议室：</option>{-foreach from=$meetingAddressInfo item=chenyao-}{-if $chenyao.isenabled-}<option value="{-$chenyao.meetingaddress-}" {-foreach from=$bookInfo.meetingaddress item=cy-}{-if $chenyao.meetingaddress==$cy-} selected {-/if-}{-/foreach-}> {-$chenyao.meetingaddress-}</option>{-/if-}{-/foreach-}</select> <span id="showDetails" style="margin-left:15px;cursor:pointer" onclick="document.getElementById('meetingAddIntro').style.display='inline';document.getElementById('hiddenDetails').style.display='inline';this.style.display='none'">打开详细?</span><span id="hiddenDetails" style="margin-left:15px;cursor:pointer;display:none" onclick="document.getElementById('meetingAddIntro').style.display='none';document.getElementById('showDetails').style.display='inline';this.style.display='none'">关闭详细</span>
							<table id=meetingAddIntro style="display:none">
								<tr><th>名称</th><th>最大容纳</th><th>投影PPT</th><th>白板</th></tr>
								{-foreach from=$meetingAddressInfo item=m-}
								{-if $m.isenabled-}
								<tr><td>{-$m.meetingaddress-}</td><td>{-$m.galleryful-}</td><td>{-$m.haveppt-}</td><td>{-$m.haveblackbord-}</td></tr>{-/if-}
								{-/foreach-}
							</table>
						</td>
						
						<!-- <td>{-foreach from=$meetingAddressInfo item=chenyao-}
							<input  type="checkbox" name="meetingaddress[]" value="{-$chenyao.meetingaddress-}" 
								{-foreach from=$bookInfo.meetingaddress item=cy-}
									{-if $chenyao.meetingaddress==$cy-}checked="checked"{-/if-}
								{-/foreach-}>{-$chenyao.meetingaddress-}
							{-/foreach-}
						</td> -->
					</tr>
					<tr>
						<th>会议开始时间：<span class="required">*</span></th><td><input required type="text" onclick="showcalendar(event, this)" value="{-if $bookInfo.meetingstarttimeYMD-}{-$bookInfo.meetingstarttimeYMD-}{-else-}{-$tomorrowYMD-}{-/if-}" size="44" name="StartTime">&nbsp;&nbsp;&nbsp;<input required type="text" style="width:30px;" value="{-$bookInfo.meetingstarttimeH-}" name="StartTime_H">:<input required type="text" style="width:30px;" value="{-$bookInfo.meetingstarttimeI-}" name="StartTime_I">:00<span style="margin-left:10px">会议预订需要提前一天，当天会议时间范围为{-$meetingConfig.startbooktime-}-{-$meetingConfig.endbooktime-},时间使用24小时制</span></td>
					</tr>
					<tr>
						<th>会议结束时间：<span class="required">*</span></th><td><input required type="text" onclick="showcalendar(event, this)" value="{-if $bookInfo.meetingendtimeYMD-}{-$bookInfo.meetingendtimeYMD-}{-else-}{-$tomorrowYMD-}{-/if-}" size="44" name="endTime">&nbsp;&nbsp;&nbsp;<input required type="text" style="width:30px;" value="{-$bookInfo.meetingendtimeH-}" name="endTime_H">:<input required type="text" style="width:30px;" value="{-$bookInfo.meetingendtimeI-}" name="endTime_I">:00</td>
					</tr>
					<tr>
						<th>会议简介：<span class="required">*</span></th><td  colspan="9"><textarea class="ckeditor" required="required" minlength="20" name="meetingintro" style="width: 400px;height: 100px;">{-$bookInfo.meetingintro-}</textarea></td>
					</tr>
					<tr>
						<th>需要行政协助：</th><td  colspan="9"><textarea class="" minlength="20" name="extralist" style="width: 99%;height: 100px;">{-$bookInfo.extralist-}</textarea></td>
					</tr>
					<tr>
						<th>邀请参加会议的同学：</th>
						<td><span id="show" style="cursor:pointer">邀请小伙伴，并给他们发送邮件？</span><span id="hidden" style="cursor:pointer;display:inline">关闭列表</span><br/>
							<div id="userList" style="display:inline"><span id="selectAll">全选</span><br/>{-strip-}{-foreach from=$allSysUser item=chenyao key=key-}
								{-$key-}:<br/>
								{-foreach from=$chenyao item=chenya key=ke-}
								{-$ke-}<br/>
								{-foreach from=$chenya item=chen -}
								{-if $chen.username neq "admin" -}
								<input id="invi{-$chen.userid-}" type="checkbox" name="invitee[]" value="{-$chen.userid-}"
									{-foreach from=$bookInfo.invitee item=cy-}
										{-if $chen.userid==$cy-} checked {-/if-}
									{-/foreach-}> <label id="label{-$chen.userid-}" class="{-foreach from=$bookInfo.invitee item=cy-}
										{-if $chen.userid==$cy-}bright{-/if-}
									{-/foreach-}" for="invi{-$chen.userid-}" title="{-$chen.email-}">{-$chen.username-}</label>
								{-/if-}
								{-/foreach-}<br/>
								{-/foreach-}
							{-/foreach-}{-/strip-}</div>
						</td>
					</tr>
					<tr><th></th>
						<td style="padding:5px 0;">
							<button type="reset">重置</button>
							<button class="submitbtn" type="button" id="checkInvitee">提交</button>
						</td>
					</tr>
				</table>
			</form>
		</div>
	</div>
<script type="text/javascript">
(function($) {
	$('#show').click(function(){
		if(confirm('勾选邀请参加会议的同学，并在会议预订成功后发送会议预订信息到所选小伙伴的邮箱？')){
			$('#userList').css('display','inline');
			$('#hidden').css('display','inline');
			$('#show').css('display','none');
		}
	});
	$('#hidden').click(function(){		
		$('#userList').css('display','none');
		$('#hidden').css('display','none');
		$('#show').css('display','inline');
	});
	//全选
	$('#selectAll').click(function(){		
		$("input:checkbox").attr("checked",'true');
		$("label").attr("class",'bright');
	});
	//点选
	$(document).ready(function(){
		$("input:checkbox").each(function(){
			var _userId=$(this).attr('value');
			$(this).click(function(){
				// alert($(this).attr('checked'));
				$("#label"+_userId).toggleClass('bright');
			});
		});
	});

	$('#checkInvitee').click(function(){
        if ($("input:checked").length > 0) {
            return true;
        } else {
            alert("至少需要选择一个小伙伴参与会议哦！");
            return false;
        }
	});

})(jQuery);

</script>

{-include file="footer.htm"-}