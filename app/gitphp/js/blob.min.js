/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/geturl",["module"],function(a){return a.config().baseurl});define("modules/getproject",["module"],function(a){return a.config().project||null});define("modules/resources",["module"],function(a){return a.config().resources});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,f,h,g){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b;(b=c.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(b=c.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+f+'images/tooltip-loader.gif" alt="'+g.Loading+'" />',ajax:{url:f,data:{p:h,a:"commit",o:"jstip",h:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});
define("modules/blameasync",["jquery","modules/geturl","modules/tooltip.commit","modules/resources"],function(a,f,h,g){function d(){var b=a(document.createElement("td"));b.attr("id","blameData");b.css("display","none");var c=a(document.createElement("p"));c.text(g.LoadingBlameData);c.appendTo(b);c=a(document.createElement("div"));c.css("text-align","center");var d=a(document.createElement("img"));d.attr("src",f+"images/blame-loader.gif");d.attr("alt",g.Loading);d.appendTo(c);c.appendTo(b);return b}
function c(b){e.html(b).addClass("de1");h(a("a.commitTip"))}var b=null,i=null,e=null,j=function(){if(e)return e.show("fast"),!1;e=d();b.find("tr:first").prepend(e);e.show("fast");a.get(i.attr("href"),{o:"js"},function(a){e.css("display")=="none"?(e.html(a).addClass("de1"),c(a)):e.fadeOut("fast",function(){c(a);e.fadeIn("fast")})})},k=function(){e&&e.hide("fast");return!1};return{init:function(a,c){b=a;i=c;i.toggle(j,k)}}});
define("modules/lang",["jquery"],function(){return function(a){a.find("select").change(function(){a.find("form").submit()});a.find('input[type="submit"]').remove()}});define("modules/snapshotformats",["module"],function(a){return a.config().formats||null});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(a,f,h){function g(a){var c="<div>"+h.Snapshot+": ",b=!0,g=a.indexOf("/snapshot")!=-1,e;for(e in f)f.hasOwnProperty(e)&&(b||(c+=" | "),g?(b=a.replace("/snapshot","/"+e),c+='<a href="'+b+'">'+f[e]+"</a>"):c+='<a href="'+a+"&fmt="+e+'">'+f[e]+"</a>",b=!1);c+="</div>";return c}return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b=c.attr("href"),b={content:{text:g(b)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:a(window)}};c.qtip(b);c.click(function(){return!1})})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,f,h,g){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b;(b=c.attr("href").match(/t=([^&]+)/))||(b=c.attr("href").match(/\/tags\/([^\/\?]+)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+f+'images/tooltip-loader.gif" alt="'+g.Loading+'" />',ajax:{url:f,data:{p:h,a:"tag",o:"jstip",t:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});define("common","jquery,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag".split(","),function(a,f,h,g,d,c){a(function(){h(a("div.lang_select"));g(a("a.snapshotTip"))});f&&(d(a("a.commitTip")),c(a("a.tagTip")))});define("blob",["jquery","modules/blameasync","common"],function(a,f){a(function(){f.init(a("table#blobData"),a("a#blameLink"))})});