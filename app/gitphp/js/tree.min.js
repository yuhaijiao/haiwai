/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/geturl",["module"],function(b){return b.config().baseurl});define("modules/resources",["module"],function(b){return b.config().resources});
define("modules/treedrilldown",["jquery","modules/geturl","modules/resources"],function(b,e,g){function f(a,m){var c=b(document.createElement("a"));c.attr("href",a);c.text(m);c.addClass("jsTree");c.addClass("expander");return c}function d(){h.find("a.treeLink").each(function(){var a=b(this),c=a.attr("href");a.parent().parent().find("td.expander").append(f(c,j))})}function c(a,c,d){d.is(":visible")?(d.hide(),d.each(function(){var c=b(this);c.data("parent")==a&&c.data("expanded",!1)}),c.find("a.expander").text(j)):
(d.each(function(){var c=b(this);if(c.data("parent")==a||c.data("expanded")==!0)c.show(),c.data("expanded",!0)}),c.find("a.expander").text(i))}function a(c,a,d){var k=a.data("depth")||0;k++;var h=b(document.createElement("img"));h.attr("src",e+"images/tree-loader.gif");h.attr("alt",g.Loading);h.addClass("treeSpinner");a.find("a.treeLink").after(h);b.get(d,{o:"js"},function(d){var e=b(d);e.addClass(c);d=a.attr("class").split(/\s+/);b.each(d,function(c,a){a.match(/[0-9a-fA-F]{40}/)&&e.addClass(a)});
e.each(function(){var a=b(this);a.data("parent",c);a.data("expanded",!0);a.data("depth",k);var d=a.find("td.fileName");(a=a.find("a.treeLink"))&&a.size()>0?d.prepend(f(a.attr("href"),j)):d.prepend(l);for(a=1;a<k;a++)d.prepend(l)});a.after(e);a.find("a.expander").text(i);a.find("img.treeSpinner").remove()})}var j="[+]",i="[\u2013]",l="\u2014",h=null,n=function(){var d=b(this),e=d.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/);e||(e=d.attr("href").match(/\/trees\/([0-9a-fA-F]{4,40})/));if(!e)return!1;
var e=e[1],f=b(this).parent().parent(),g=h.find("."+e);g&&g.size()>0?c(e,f,g):a(e,f,d.attr("href"));return!1};return{init:function(a){h=a;d();h.find("a.jsTree").live("click",n)}}});define("modules/getproject",["module"],function(b){return b.config().project||null});define("modules/lang",["jquery"],function(){return function(b){b.find("select").change(function(){b.find("form").submit()});b.find('input[type="submit"]').remove()}});
define("modules/snapshotformats",["module"],function(b){return b.config().formats||null});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(b,e,g){function f(b){var c="<div>"+g.Snapshot+": ",a=!0,f=b.indexOf("/snapshot")!=-1,i;for(i in e)e.hasOwnProperty(i)&&(a||(c+=" | "),f?(a=b.replace("/snapshot","/"+i),c+='<a href="'+a+'">'+e[i]+"</a>"):c+='<a href="'+b+"&fmt="+i+'">'+e[i]+"</a>",a=!1);c+="</div>";return c}return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=b(this),a=c.attr("href"),a={content:{text:f(a)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:b(window)}};c.qtip(a);c.click(function(){return!1})})})}});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,e,g,f){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=b(this),a;(a=c.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(a=c.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(a=a?a[1]:null)a={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+f.Loading+'" />',ajax:{url:e,data:{p:g,a:"commit",o:"jstip",h:a},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},c.qtip(a)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,e,g,f){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=b(this),a;(a=c.attr("href").match(/t=([^&]+)/))||(a=c.attr("href").match(/\/tags\/([^\/\?]+)/));if(a=a?a[1]:null)a={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+f.Loading+'" />',ajax:{url:e,data:{p:g,a:"tag",o:"jstip",t:a},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},c.qtip(a)})})}});define("common","jquery,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag".split(","),function(b,e,g,f,d,c){b(function(){g(b("div.lang_select"));f(b("a.snapshotTip"))});e&&(d(b("a.commitTip")),c(b("a.tagTip")))});define("tree",["jquery","modules/treedrilldown","common"],function(b,e){b(function(){e.init(b("table.treeTable"))})});