/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/sidebysidecommitdiff",["jquery"],function(b){function d(){var a=e.offset().top;b(document).scrollTop()>a&&b("html, body").animate({scrollTop:a},200)}function f(c){a.find("a.SBSTOCItem").each(function(a,e){c==e?b(this).parent().addClass("activeItem"):b(this).parent().removeClass("activeItem")})}function g(a){e.find("div.diffBlob").each(function(){var c=b(this);c.attr("id")==a?c.slideDown("fast"):c.slideUp("fast")})}var a=null,e=null,c=null,j=null,h=null,i=!1,k=function(){b(document).scrollTop()>
c?i||(a.css("position","fixed"),a.css("top","0px"),i=!0):i&&(a.css("position",j),a.css("top",h),i=!1)},l=function(){var c=b(this);f(c.get(0));g(c.attr("href").substring(1));a.find("a.showAll").show();d();return!1},m=function(){a.find("a.SBSTOCItem").parent().removeClass("activeItem");e.find("div.diffBlob").slideDown("fast");b(this).hide();d();return!1};return{init:function(d,f){a=d;e=f;c=a.position().top;j=a.css("position");h=a.css("top");b(window).scroll(k);a.find("a.SBSTOCItem").click(l);a.find("a.showAll").click(m)}}});
define("modules/getproject",["module"],function(b){return b.config().project||null});define("modules/lang",["jquery"],function(){return function(b){b.find("select").change(function(){b.find("form").submit()});b.find('input[type="submit"]').remove()}});define("modules/snapshotformats",["module"],function(b){return b.config().formats||null});define("modules/resources",["module"],function(b){return b.config().resources});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(b,d,f){function g(b){var e="<div>"+f.Snapshot+": ",c=!0,g=b.indexOf("/snapshot")!=-1,h;for(h in d)d.hasOwnProperty(h)&&(c||(e+=" | "),g?(c=b.replace("/snapshot","/"+h),e+='<a href="'+c+'">'+d[h]+"</a>"):e+='<a href="'+b+"&fmt="+h+'">'+d[h]+"</a>",c=!1);e+="</div>";return e}return function(a){a&&a.size()>0&&require(["qtip"],function(){a.each(function(){var a=b(this),c=a.attr("href"),c={content:{text:g(c)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:b(window)}};a.qtip(c);a.click(function(){return!1})})})}});define("modules/geturl",["module"],function(b){return b.config().baseurl});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,d,f,g){return function(a){a&&a.size()>0&&require(["qtip"],function(){a.each(function(){var a=b(this),c;(c=a.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(c=a.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(c=c?c[1]:null)c={content:{text:'<img src="'+d+'images/tooltip-loader.gif" alt="'+g.Loading+'" />',ajax:{url:d,data:{p:f,a:"commit",o:"jstip",h:c},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},a.qtip(c)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(b,d,f,g){return function(a){a&&a.size()>0&&require(["qtip"],function(){a.each(function(){var a=b(this),c;(c=a.attr("href").match(/t=([^&]+)/))||(c=a.attr("href").match(/\/tags\/([^\/\?]+)/));if(c=c?c[1]:null)c={content:{text:'<img src="'+d+'images/tooltip-loader.gif" alt="'+g.Loading+'" />',ajax:{url:d,data:{p:f,a:"tag",o:"jstip",t:c},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:b(window)}},a.qtip(c)})})}});define("common","jquery,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag".split(","),function(b,d,f,g,a,e){b(function(){f(b("div.lang_select"));g(b("a.snapshotTip"))});d&&(a(b("a.commitTip")),e(b("a.tagTip")))});
define("commitdiff",["jquery","modules/sidebysidecommitdiff","common"],function(b,d){b(function(){var f=b("div.commitDiffSBS div.SBSTOC"),g=b("div.SBSContent");f.size()>0&&g.size()>0&&d.init(f,g)})});