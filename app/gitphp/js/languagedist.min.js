/*
 * GitPHP
 * 
 * @author Christopher Han <xiphux@gmail.com>
 * @copyright Copyright (c) 2012 Christopher Han
 * @package GitPHP
 * @subpackage Javascript
 */
define("modules/geturl",["module"],function(a){return a.config().baseurl});define("modules/getproject",["module"],function(a){return a.config().project||null});
define("modules/languagedistgraph",["modules/geturl","modules/getproject","d3"],function(a,e){var g=null,f=null,d=null,c=null,b=null,l=null,h=null,i=null,k=null,j=null,n=function(a,c){c=d3.interpolate({startAngle:0,endAngle:0},{startAngle:a.startAngle,endAngle:a.endAngle});return function(a){return b(c(a))}};return{init:function(m){g=d3.layout.pie().value(function(a){return a.value});f=d3.scale.category20();d=d3.select(m).append("svg").attr("width",600).attr("height",600);h=d.append("g").attr("transform",
"translate(300,300)");c=d.append("g").attr("transform","translate(300,300)");i=d.append("g").attr("transform","translate(300,300)");k=i.append("text").attr("dy",-25).attr("font-size","16").attr("text-anchor","middle").style("opacity",0);j=i.append("text").attr("dy",0).attr("text-anchor","middle").attr("font-size","20").text("Loading");i.append("text").attr("dy",20).attr("text-anchor","middle").attr("fill","gray").attr("font-size","12").text("files");h.append("path").attr("fill","#EFEFEF").attr("d",
d3.svg.arc().innerRadius(100).outerRadius(200).startAngle(0).endAngle(6.28318531)());b=d3.svg.arc().innerRadius(100).outerRadius(200);l=d3.svg.arc().innerRadius(100).outerRadius(220);d3.json(a+"?p="+e+"&a=graphdata&g=languagedist",function(a){var a=d3.entries(a),d=0;a.length>0&&a.forEach(function(a){d+=a.value});j.text(d);c.selectAll("path").data(g(a)).enter().append("path").attr("stroke","white").attr("stroke-width",0.5).attr("fill",function(a,b){return f(b)}).transition().duration(750).attrTween("d",
n).each("end",function(){h.remove()});c.selectAll("path").on("mouseover",function(a){d3.select(this).transition().duration(250).attr("d",l);k.transition().style("opacity",1).text(a.data.key);j.text(a.data.value)}).on("mouseout",function(){d3.select(this).transition().duration(250).attr("d",b);k.transition().style("opacity",0);j.text(d)})})}}});define("modules/lang",["jquery"],function(){return function(a){a.find("select").change(function(){a.find("form").submit()});a.find('input[type="submit"]').remove()}});
define("modules/snapshotformats",["module"],function(a){return a.config().formats||null});define("modules/resources",["module"],function(a){return a.config().resources});
define("modules/tooltip.snapshot",["jquery","modules/snapshotformats","modules/resources"],function(a,e,g){function f(a){var c="<div>"+g.Snapshot+": ",b=!0,f=a.indexOf("/snapshot")!=-1,h;for(h in e)e.hasOwnProperty(h)&&(b||(c+=" | "),f?(b=a.replace("/snapshot","/"+h),c+='<a href="'+b+'">'+e[h]+"</a>"):c+='<a href="'+a+"&fmt="+h+'">'+e[h]+"</a>",b=!1);c+="</div>";return c}return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b=c.attr("href"),b={content:{text:f(b)},
show:{event:"click"},hide:{fixed:!0,delay:150},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},position:{viewport:a(window)}};c.qtip(b);c.click(function(){return!1})})})}});
define("modules/tooltip.commit",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,e,g,f){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b;(b=c.attr("href").match(/h=([0-9a-fA-F]{4,40}|HEAD)/))||(b=c.attr("href").match(/\/commits\/([0-9a-fA-F]{4,40}|HEAD)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+f.Loading+'" />',ajax:{url:e,data:{p:g,a:"commit",o:"jstip",h:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});
define("modules/tooltip.tag",["jquery","modules/geturl","modules/getproject","modules/resources"],function(a,e,g,f){return function(d){d&&d.size()>0&&require(["qtip"],function(){d.each(function(){var c=a(this),b;(b=c.attr("href").match(/t=([^&]+)/))||(b=c.attr("href").match(/\/tags\/([^\/\?]+)/));if(b=b?b[1]:null)b={content:{text:'<img src="'+e+'images/tooltip-loader.gif" alt="'+f.Loading+'" />',ajax:{url:e,data:{p:g,a:"tag",o:"jstip",t:b},type:"GET"}},style:{classes:"ui-tooltip-gitphp ui-tooltip-light ui-tooltip-shadow"},
position:{viewport:a(window)}},c.qtip(b)})})}});define("common","jquery,modules/getproject,modules/lang,modules/tooltip.snapshot,modules/tooltip.commit,modules/tooltip.tag".split(","),function(a,e,g,f,d,c){a(function(){g(a("div.lang_select"));f(a("a.snapshotTip"))});e&&(d(a("a.commitTip")),c(a("a.tagTip")))});define("languagedist",["jquery","modules/languagedistgraph","common"],function(a,e){a(function(){e.init("div#graph")})});